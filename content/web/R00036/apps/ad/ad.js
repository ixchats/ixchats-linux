var Ad=function(){var b=Math.floor;function a(a,c,d){var e=this;this.pow2=a;this.text1=null;this.text2=null;this.wrapper=null;this.config=d;this.adverts=c;this.latest=a.last.id;this.status=a.last.text;this.status=a.last.text;this.countdownInterval=null;this.settings=JSON.parse(localStorage.getItem("Settings"))||{language:"en"};this.lang=this.settings.language;this.currentChat=window.parent.location.href.split("rxat.ro/")[1].split("?")[0];var f=1;var g=Object.values(a.pssa);var h=this.getAllPromoGroups();var i=window.navigator.userAgent;if(-1==i.toLowerCase().indexOf("firefox")&&-1==i.indexOf("Chrome")&&-1<i.indexOf("Safari")){var j=makeElement(document.body,"iframe","zoomFrame");j.contentWindow.onresize=function(){window.onzoom.call()};window.onzoom=function(){var a=document.querySelectorAll("[data-sm]");for(var b=0;b<a.length;b++){var c=a[b].querySelector("span");if(c)c=c.querySelector("span");else continue;var d=c.style.animation;c.style.animation="none";c.offsetHeight;c.style.animation=d}}}if(0<h.length){var k=this.getIndexOnPromo(this.currentChat);if(-1!=k){if(.3<=Math.random()){this.setUpPromotion(h[k].adimg)}else{this.setUpBanner(this.latest,this.status)}window.setInterval(function(){if(.3<=Math.random()){e.setUpPromotion(h[k].adimg,h[k].group)}else{e.setUpBanner(e.latest,e.status)}},3e4)}else{this.setUpBanner(this.latest,this.status);window.setInterval(function(){if(0==f%2){e.setUpBanner(e.latest,e.status)}else{if("undefined"!=typeof c[e.lang]){if(.5<=Math.random()||0==c[e.lang].length){var a=g[b(Math.random()*g.length)];if(a==e.latest)a-=1;e.setUpBanner(a)}else{var d=c[e.lang][b(Math.random()*c[e.lang].length)];e.setUpPromotion(d.adimg,d.group)}}else{var h=g[b(Math.random()*g.length)];if(h==e.latest)h-=1;e.setUpBanner(h)}}f++},3e4)}}else{this.setUpBanner(this.latest,this.status);window.setInterval(function(){if(0==f%2){e.setUpBanner(e.latest,e.status)}else{var a=g[b(Math.random()*g.length)];if(a==e.latest)a-=1;e.setUpBanner(a)}f++},3e4)}}var c=a.prototype;c.clearWrappers=function clearWrappers(){this.text1=document.querySelector("#text1");this.text2=document.querySelector("#text2");this.wrapper=document.querySelector("#contentWrapper");this.text1.innerHTML="";this.text2.innerHTML="";this.wrapper.innerHTML="";clearInterval(this.countdownInterval)};c.setUpPromotion=function setUpPromotion(a,b){this.clearWrappers();var c=new Image(728,90);c.src="https://rxat.ro/web_gear/chat/GetImage7.php?s&W=728&H=90&U="+a;c.style.borderRadius="5px";this.wrapper.appendChild(c);if(b){document.addEventListener("click",function(){window.top.location.href="https://rxat.ro/"+b})}};c.setUpBanner=function setUpBanner(a,b){var c=this;var d=this.getPowerName(a);var e=this.getRandomElements(this.getPowerSmileys(a),10);e.unshift(d);this.clearWrappers();var f=makeElement(this.wrapper,"div","flex-grid boxes");for(var g=0;10>g;g++){var h=makeElement(f,"div","col sel");var i=makeElement(h,"div","box");var j=createSm("("+e[g]+")","smilieHolder",40,-5,null,null,null,null,null,!0);if(e[g])i.appendChild(j);addToolTip(h,"("+e[g]+")",!0,"bottom")}if(b){this.text1.textContent="New "+d.toUpperCase()+" power "+b;this.countdownInterval=setInterval(function(){c.text2.textContent=c.getTimeString()},500)}else{this.text1.textContent=d.toUpperCase()+" power"}document.addEventListener("click",function(){window.top.location.href="https://rxat.ro/powers"})};c.getRandomElements=function getRandomElements(a,c){for(var d=a.length-1;0<d;d--){var e=a[d];var f=b(Math.random()*(d+1));a[d]=a[f];a[f]=e}return a.slice(0,c)};c.getTimeString=function getTimeString(){var a=1e3*this.config.t-Date.now();if(0>=a){return this.config.m2}else{var c="";var d=b(a/1e3)%60;var e=b(a/60000)%60;var f=b(a/3600000)%24;if(24<=f){c=b(f/24)+" days"}else{c=f+":"+(10>e?"0":"")+e+"."+(10>d?"0":"")+d}var g=this.config.m1;g=g.replace(/%1/g,c);return g}};c.getPowerName=function getPowerName(a){for(var b in this.pow2.pssa){if(this.pow2.pssa[b]==a){return b}}for(var c in this.pow2.SuperP){if(c==a){return this.pow2.SuperP[c].s.split(",")[0]}}return null};c.getAllPromoGroups=function getAllPromoGroups(){var a=[];var b=Object.values(this.adverts);b.forEach(function(b){if(0<b.length)a=a.concat(b)});return a};c.getIndexOnPromo=function getIndexOnPromo(a){var b=-1;var c=this.getAllPromoGroups();c.forEach(function(c,d){if(c.group.toLowerCase()==a.toLowerCase())b=d});return b};c.getPowerSmileys=function getPowerSmileys(a){var b=[];for(var c in this.pow2.topsh){if(this.pow2.topsh[c]==a){b.push(c)}}if(0==b.length){for(var d in this.pow2.SuperP){if(d==a){var e=this.pow2.SuperP[d].s.split(",");e.forEach(function(a){b.push(a)})}}}return b};return a}();

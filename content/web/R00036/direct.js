"use strict";let boxdir="box";switch(n=GET.params.n,n||(n=GET.path),n||(n="xat_test"),json.type){case"home":Home=1;break;default:Direct=1}mDirect||initConfig(),xConfig.debugBox="box/embed.html?n="+n,xConfig.gn=n,xConfig.debugNoLogs=!0,xConfig.debugFetchGroup=!0,xConfig.debugTooltips=!0;let copyright=document.getElementById("copyrightyear");function newstuff(e){var t=new Date(2021,2,17,0,0,0,0),n=new Date(2021,2,18,0,0,0,0);t<=e&&e<=n?($("#newStf").removeClass("d-none"),$("#newV").append(" <small>(v1.54)</small>")):$("#newStf").addClass("d-none")}function loadHash(e){if(!Home)return;let t=e||location.hash;if(t&&["featured","popular","supported","games"].indexOf(t)>=0&&location.hash.length>0){let e=document.querySelector("#groups");e&&e.scrollIntoView({behavior:"smooth"})}}copyright&&copyright.appendChild(document.createTextNode((new Date).getFullYear())),newstuff(new Date);let sm=document.getElementById("sendmsg");sm&&sm.addEventListener("submit",DoSendMessage);let captcha=!1;function DoSendMessage(e){e.preventDefault();getGET();let t=$("#sendmsgerr"),n=$("#sendmsg"),a=xConfig.gn,o={},i=$("#sndemail").val(),s=$("#sndfeedback").val();t.addClass("d-none"),o.GroupName=filter(a),o.email=filter(i),o.feedback=filter(s),o.submit="Send",captcha&&(o["g-recaptcha-response"]=grecaptcha.getResponse()),$(document.body).css({cursor:"wait"}),urlPost("https://rxat.ro/web_gear/chat/ownerfeedback2.php",filter(o)).then((function(e){if($(document.body).css({cursor:"default"}),allErrsOff(),$("#createcap").removeClass("d-none"),e.Err.captcha)return captcha=!0,AddCap("createcap"),void $("#createcap").addClass("capspace");e.Err.ownerfeedback?(n.trigger("reset"),doSuccessMsg(t,'<span data-localize="web.msgsent">Your message has been sent.</span>',!0),$("#createcap").addClass("d-none")):DoErrs(e),captcha=!1,$("#createcap").removeClass("capspace"),localize(["chat","web","chats"])}))}mDirect||localize(["chat","web","chats"]);let defaultwidth=650,defaultheight=486,update=null,embedgrp=document.getElementById("navEmbedGrp");function doEmbed(){$("#embedmodal").modal();let e=$("#embed_width"),t=$("#embed_height"),n=$("#embed_code"),a=($(".rngembed"),$("#copy")),o=$(".toembed button"),i=0,s=0,r=xConfig.gn,d=xConfig.gid;t.val(defaultheight),e.val(defaultwidth),n.html(getEmbed(r,d,defaultwidth,defaultheight)),o.off("click").on("click",(function(a){switch(a.preventDefault(),a.target.id){case"embsmall":i=400,s=300;break;case"embmedium":i=540,s=405;break;case"emblarge":i=640,s=480}t.val(s),e.val(i),n.html(getEmbed(r,d,i,s))})),e.off("keyup").on("keyup",(function(a){clearTimeout(update),update=setTimeout((function(){let o=a.target.value;(isNaN(o)||o>2e3||o<400)&&(o=defaultwidth,e.addClass("inpshake"),setTimeout((function(){e.removeClass("inpshake")}),1e3)),o=parseInt(o),i=o,s=calculateProp(o,!1),e.val(i),t.val(s),n.html(getEmbed(r,d,o,0==s?t.val():s))}),1e3)})),t.off("keyup").on("keyup",(function(a){clearTimeout(update),update=setTimeout((function(){let o=a.target.value;(isNaN(o)||o>2e3||o<400)&&(o=defaultheight,t.addClass("inpshake"),setTimeout((function(){t.removeClass("inpshake")}),1e3)),o=parseInt(o),s=o,i=calculateProp(o,!0),t.val(s),e.val(i),n.html(getEmbed(r,d,0==i?e.val():i,o))}),1e3)})),e.off("keydown").on("keydown",(function(e){clearTimeout(update)})),t.off("keydown").on("keydown",(function(e){clearTimeout(update)})),a.tooltip({trigger:"click",placetop:"top"}),a.off("click").on("click",(function(e){e.preventDefault();var t=document.getElementById("embed_code");t.select(),t.setSelectionRange(0,99999),document.execCommand("copy"),a.tooltip("show"),setTimeout((function(){a.tooltip("hide")}),1e3),localize(["chats"])})),$("#preview").off("click").on("click",(function(n){i=i||e.val(),s=s||t.val(),i<=650&&getEmbed(r,d,i,s,!0),i>650&&getEmbed(r,d,i,s,!1,!0)}))}embedgrp&&embedgrp.addEventListener("click",doEmbed);let LastApp,sideFrame,lcFrame,sbe,cn=Math.floor(Math.random()*Math.floor(2147483647)),trace=console.log,shimFrame=document.getElementById("shim"),appID=0;function main(){if(Direct?(document.getElementById("closeColLeft").classList.remove("d-none"),sideBut(),document.body.style.backgroundColor="black",handleSideBars(),$("#navxatApps").addClass("d-none")):(document.body.style.backgroundColor="white",document.getElementById("navLogo").src="/content/img/xatsat.svg",$("#rankdrop").removeClass("d-block").addClass("d-none")),setupConsoleLogging(),initLanguage(),initAuser3(),setLogo(),xConfig.debugMainTemplate){let e="",t=document.createElement("style");t.appendChild(document.createTextNode(e)),document.head.insertBefore(t,null);let n="";document.body.innerHTML=n}if(readUser(),fetchPromo().then((function(e){!Direct&&e&&(xConfig.gn=e.n,xConfig.debugBox="box/embed.html?n="+e.n,Home&&doHome(e)),fetchGroupData().then((function(){localize()}))})),xConfig.username)document.getElementById("navLogin").addEventListener("click",(function(){directConfig("login")})),directConfig("login");else{let e=document.getElementById("navLogin");e.href="/login",e.removeAttribute("data-toggle"),e.removeAttribute("data-target"),e.addEventListener("click",(function(){window.location.href="https://rxat.ro/login"}))}xConfig.debugMainOwner&&directConfig("mainowner"),Direct&&directConfig("background"),directConfig("landscape"),navClickHandlers(),window.addEventListener("message",onMessage,!1),xConfig.debugWorkbox&&"serviceWorker"in navigator&&window.addEventListener("load",(()=>{navigator.serviceWorker.register("/sw.js")})),_uacct="UA-1813155-1",2&xConfig.cookies||urchinTracker();let e={30008:"trade",20010:"fourinrow",60002:"canvas",10001:"media",20047:"xavi"};window.setTimeout((()=>{let t=new URLSearchParams(window.location.search).get("open");t&&e.hasOwnProperty(t)&&startSide(e[t])}),1500)}function handleSideBars(){let e=document.querySelector(".sidebar"),t=document.querySelectorAll("[data-app]");t.length>0&&t.forEach((t=>{t.addEventListener("click",(t=>{"IMG"==t.target.nodeName&&(t=t.target.parentElement||t.target.parentNode);let n=t.target.dataset||t.dataset;if(n&&(n=n.app,n))switch(n){case"media":startSide("media",null,null,null);break;case"xavi":startSide("xavi",0,600);break;default:startSide(n,0),"apps"==n&&e.classList.add("d-none")}}))}))}function classicSetDialog(e,t){let n=xInt(t);var a;switch(e){case"selector":a="selector";break;case"settings":a=e;break;default:a="actions"}setFrameVis(a),document.getElementById("FrameDialogCloseBut").onclick=function(){setFrameVis()},document.getElementById("FrameBack").onclick=function(){setFrameVis()};var o=document.getElementById(a+"Frame");switch(e){case"settings":settings=o.contentWindow.settings;break;case"selector":removeClass("d-none","FrameDialog"),removeClass("d-none","FrameBack"),selector=o.contentWindow.selector,doSelector(t),n=t.UserNo;break;default:actions=o.contentWindow.actions,actions.clearall(),actions.Visible=!0}ToC({Command:"LoadClassicDialog",Type:e,UserNo:n})}function fetchGroupData(){return new Promise(((e,t)=>{if(xConfig.debugJsonGroup){var n=JSON.parse(document.getElementById("xjson").innerHTML);void 0!==n.id&&void 0!==n.g&&void 0!==n.d&&void 0!==n.a?(xConfig.gid=n.id,xConfig.gn=null==n.g?"xat":n.g,xConfig.gd=n.d.replace(/\\u00A0/g,""),xConfig.type=n.t,xConfig.background=n.gb,xConfig.tabs=n.tabs,updatePage()):console.error("invalid embedded json")}else{if(xConfig.debugFetchGroup){let t,n="https://rxat.ro/web_gear/chat/roomid.php?d="+xConfig.gn;return(t=GET.params.cb)&&(n+="&cb="+t),void fetch(n).then((function(e){return e.json()})).then((function(t){if(void 0!==t.id&&void 0!==t.g&&void 0!==t.d&&void 0!==t.a){xConfig.gid=t.id,xConfig.gn=null==t.g?"xat":t.g,xConfig.gd=t.d.replace(/\\u00A0/g,""),xConfig.type=t.t,xConfig.background=t.gb,xConfig.if=t.if||!1;let e=guessIfXatFrame();if(t.if&&e?($("#groupBackgroundFrame").attr("src",t.if),displayXatFrameAlert()):xConfig.background=t.gb,xConfig.tabs=t.tabs,GET.params.x&&Direct&&t.a){let e=t.a.split(";=");xConfig.chatBg=e[0]||""}updatePage()}else console.error("invalid fetched json");e()}))}xConfig.gid=42,xConfig.gn="phoenix",xConfig.gd="arising from the ashes of its predecessor",xConfig.background="http://i47.tinypic.com/34hdvrn.png"}e()}))}function displayXatFrameAlert(){let e=localStorage.getItem("xatframe_declined");if(e&&"1"==e||isMobile())return;let t=document.querySelector("#xatFrameSet"),n=document.querySelector("#xatframeAlert"),a=document.querySelector("#xatframe_alert_close");null==n||n.classList.remove("d-none"),a&&a.addEventListener("click",(e=>{localStorage.setItem("xatframe_declined","1")})),t&&t.addEventListener("click",doIframeModal)}function guessIfXatFrame(e){let t=getIndividualiFrames(),n=e||xConfig.gn;return t.list||(t.list=[]),t.disabled||(t.disabled=[]),t.list.indexOf(n)>=0||!(t.disabled.indexOf(n)>=0)&&!!(t.global||-1!=t.list.indexOf(n)&&-1!=t.disabled.indexOf(n))}function updatePage(){document.documentElement.setAttribute("lang",xConfig.lang),Direct&&(document.title=xConfig.gn,document.querySelector('meta[name="description"]').setAttribute("content",xConfig.gd),xConfig.background&&("#"==xConfig.background.charAt(0)?document.body.style.background=xConfig.background:document.body.style.backgroundImage="url('"+xConfig.background+"')"),document.getElementById("groupName")&&document.getElementById("groupName").appendChild(document.createTextNode(xConfig.gn)),document.getElementById("groupDescription")&&document.getElementById("groupDescription").appendChild(document.createTextNode(xConfig.gd))),Home&&(document.querySelector('meta[name="description"]').setAttribute("content","rxat.ro is a fun social networking site, join a group, make friends, create your own rxat group"),document.title="rxat");let e=document.getElementById("embedframe");if(e)if(xConfig.chatBg&&"#"!==xConfig.chatBg.charAt(0)){let t=document.createElement("img");t.width=728,t.height=486,t.src=xConfig.chatBg,e.classList.add("d-none"),e.parentNode.insertBefore(t,e)}else e.src=dir+"box/embed.html?n="+xConfig.gn;if(Direct&&document.getElementById("bottomNavGroupName")&&document.getElementById("bottomNavGroupName").appendChild(document.createTextNode(xConfig.gn)),"function"==typeof $){if(readUser(),$("#navUsernameId").html("<div class='media m-0 ml-2'>\n      <img class='mr-0 ml-1' src='"+xConfig.avatar+"' width='33' height='33' alt='avatar'>       <div class='media-body'>\n        <p class='m-0'>"+xConfig.username+"<br>"+xConfig.id+"</p>\n      </div>\n    </div>"),Home&&void 0!==xConfig.username&&xConfig.username.length>0){let e="<span data-localize=index.welcomereg>Find a rxat group that shares your interests. Make your own rxat group. Get and trade Powers. Play a multiplayer game. Design your own animated avatar character. Send stickers with custom text.</span>";$("#newtoxat").removeAttr("data-localize"),$("#newtodesc").removeAttr("data-localize"),$("#newtoxat").html("<h4><span data-localize=index.hello>Hello</span>, "+xConfig.username+"!</h4>"),$("#newtodesc").html(e),localize(["index"])}if($("#navAccountBadge").text(xConfig.accountBadge),xConfig.accountBadge,$("#navAccountBadge").hide(),$("#navStreamBadge").text(xConfig.streamBadge),xConfig.streamBadge,$("#navStreamBadge").hide(),Direct)if($("#navBottomTabs").empty(),"xat"==xConfig.gn||!xConfig.tabs||0==xConfig.tabs.length||1==xConfig.tabs.length&&"Comments"==xConfig.tabs[0].label)$("#navBottom").hide();else{let e,t;if(void 0!==xConfig.tabs&&xConfig.tabs.length>0){let n=xConfig.tabs;for(let a=0;a<n.length;a++){if("Comments"==n[a].label)continue;let o=String(n[a].url);-1!=o.search(/^http:\/\/[\.a-z]*rxat.ro\//)&&(o=o.replace("http:","https:")),o=o.replace("http://rxat.ro","https://rxat.ro"),o>0&&(o="https://rxat.ro/web_gear/chat/media.php?d="+xConfig.gn+"&p="+(o-1)+"&id="+xConfig.gid),(t=GET.params.cb)&&(o+="&cb="+t),$("#navBottomTabs").append("<li class='nav-item'><a id='navTab"+a+"' class='nav-link' href='#/' data-url='"+o+"'><img class='mr-1' src='"+xConfig.dir+"img/navbar/userframe.svg' alt='userframe'>"+n[a].label+"</a></li>"),document.getElementById("navTab"+a)&&document.getElementById("navTab"+a).addEventListener("click",tabPress),0==a&&(e=tabPress(0,o,1))}}$("#navBottomTabs").append("<li class='nav-item'><a id='navClose' class='nav-link"+(e?"":"d-none")+"' href='#/' data-url='close'>                 <img class='mr-1' src='"+xConfig.dir+"img/navbar/close.svg' alt='close'>close</a></li>"),document.getElementById("navClose")&&document.getElementById("navClose").addEventListener("click",tabPress)}xConfig.debugTooltips&&$((function(){$('[data-toggle="tooltip"]').tooltip({trigger:"hover"})}))}else console.error("jquery not available");legacyLinks();var t=document.getElementById("cookiePopup"),n=document.getElementById("cookieAgree"),a=document.getElementById("cookieSettings");t&&n&&a&&(t.offsetHeight,Number.isInteger(xConfig.cookies)||t.classList.add("show"),n.addEventListener("click",(function(){t.classList.remove("show")})),a.addEventListener("click",(function(){t.classList.remove("show"),$("#privacyModal").modal("show")})))}function tabPress(e,t,n){if(t||(t=e.target.dataset.url),!t)return 0;if("close"==t)return document.getElementById("groupUserFrame")&&(document.getElementById("groupUserFrame").src=""),$("#navBottom").addClass("fixed-bottom"),$("#navClose").addClass("d-none"),$("#navBottomTabs").find('[id^="navTab"]').removeClass("active"),$("#groupUserFrame").addClass("d-none"),0;let a=0;return a=4&xConfig.cookies,n&&256&xConfig.type&&(a=1),a||(a=-1!=t.search(/^https:\/\/rxat.ro\//)),a||(a=-1!=t.search(/^https:\/\/[a-z]*\.rxat.ro\//)),a||(a=-1!=t.search(/^https:\/\/rxat.ro\//)),n||e||(a=1),e&&!a?($("#privacyGroupUrl").text(t),$("#privacyGroupFrame").removeClass("d-none"),$("#privacyModal").modal("show"),0):a?n||"http:"!=t.substr(0,5)?(document.getElementById("groupUserFrame")&&(document.getElementById("groupUserFrame").src=t),$("#navBottom").removeClass("fixed-bottom"),$("#navClose").removeClass("d-none"),$(e.target).addClass("active"),$("#groupUserFrame").removeClass("d-none"),1):(window.open(t,"_blank"),0):0}function sideBut(e){var t=document.getElementById("closeApp");let n=document.querySelector(".sidebar");t.style.display=e?"block":"none","none"==t.style.display&&n&&n.classList.remove("d-none"),sbe||t.addEventListener("click",(function(){startSide("")})),sbe=1}function startSide(e,t,n,a){n||(n=425),shimFrame&&(shimFrame.style.display="none");let o=xConfig.dir+"apps/"+e+"/"+e+".html";if(a&&"media"==e?o+="?link="+a:a&&(o+="#"+a),"shim"==e)return lcFrame=shimFrame,shimFrame.style.width=n+16+"px",shimFrame.style.display="block",shimFrame.src=o,void sideBut(1);if(shimFrame.style.width="16px",shimFrame.src="",""===e)return sideFrame&&(sideFrame.style.display="none",sideFrame.src=""),lcFrame=null,sideBut(0),void(appID=0);if(sideFrame=document.getElementById(t?"rightsideframe":"sideframe"),lcFrame=sideFrame,sideFrame){if(sideFrame.style.height="media"==e?"576px":"600px","fshim"===e)sideFrame.src==o?sideFrame.contentWindow.postMessage(JSON.stringify({OpenByN:LastApp,cn:cn}),xConfig.origin):sideFrame.src=o;else{let e=sideFrame.src.split("#"),t=o.split("#");sideFrame.src=o,e[1]==t[0]&&sideFrame.contentDocument.location.reload(!0)}sideFrame.style.width=n+"px",sideFrame.style.display="block",sideBut(1)}}function onMessage(e){if(e.origin!==xConfig.origin)return;let t=JSON.parse(e.data);if("sideload"!=t.action)return t.tobox?lcFrame&&13==t.channel?void(lcFrame.style.width=(600==t.msg?600:425)+"px"):void window.box.postMessage(e.data,xConfig.origin):"4"!=t.channel||lcFrame&&20034==appID&&"]"!=t.msg.charAt(t.msg.length-1)?void(lcFrame&&lcFrame.contentWindow.postMessage(e.data,xConfig.origin)):(t.channel=10,t.msg="",void window.box.postMessage(JSON.stringify(t),xConfig.origin));if(t.o){sideFrame&&(sideFrame.src="",sideFrame.style.display="none");let e=425;return 1&t.i&&(e=600),appID=t.i,startSide("shim",0,e),void(shimFrame.onload=function(e){let n=t.i;t.f&&(n=t.f),shimFrame.parentElement&&shimFrame.parentElement.classList.remove("d-none"),shimFrame.contentWindow.postMessage(JSON.stringify({channel:"startUp",id:n,cn:cn}),xConfig.origin)})}"media"==t.n?startSide(t.n,null,null,t.l):"xavi"==t.n?startSide(t.n,0,600):startSide(t.n,0)}function setupConsoleLogging(){console.log=(console.log.bind(console),xConfig.name,xConfig.debugLogIgnore,function(){xConfig.debugNoLogs}),trace=console.log}function SelectAll(e){document.getElementById(e).focus(),document.getElementById(e).select()}function xInt(e){return e=parseInt(e),isNaN(e)?0:e}function xpromo(e){let t;for(var n in t='<a href="//rxat.ro/'+e+'">'+e+'</a> <small>(<span data-localize="index.notrun">Note: this chat is not run by rxat</span>)</small><br>',t+='<span data-localize="index.promotedgroups">Promoted groups</span>: ',xConfig.xpromo)t+='<a href="//rxat.ro/'+xConfig.xpromo[n].n+'">'+xConfig.xpromo[n].n+"</a> | ";t+='<a href="//rxat.ro/promotion"><span data-localize="index.promomine">Promote my group</span></a>',$("#promo").html(t)}function pmain(){$("#xfeatured,#xpopular,#xsupported,#xgames").click((function(e){return clist(this,"p1",e.currentTarget.id),location.hash="#"+e.currentTarget.id.substr(1),!1})),$("#p1,#p2,#p3,#p4,#p5,#pp1,#pp2,#pp3,#pp4,#pp5").click((function(e){return clist(this,e.target.id),$("html, body").animate({scrollTop:$("#groups").offset().top}),!1})),$("#prev, #xprev, #next, #xnext").click((function(e){return clist(this,e.currentTarget.id),$("html, body").animate({scrollTop:$("#groups").offset().top}),!1}))}function prender(){xConfig.xlist&&xlist("#thumbs",xConfig.xlist)}function pupdate(){if(xConfig.lang&&xConfig.loadlist){var e="https://rxat.ro/json/lists/lists.php?page=";"games"==xConfig.list?e+=xConfig.list:e+=parseInt(xConfig.page)+"_"+(xConfig.loadlistfail?"en":xConfig.lang.substr(0,2))+"_"+xConfig.list,e+="",fetch(e).then((function(e){if(200===e.status)e.json().then((function(e){xConfig.loadlist=!1,xConfig.loadlistfail=!1,xConfig.xlist=e,prender()}));else if(!xConfig.loadlistfail&&"en"!=xConfig.lang.substr(0,2))throw Error(e.status)})).catch((function(e){xConfig.loadlistfail||"en"==xConfig.lang.substr(0,2)||(xConfig.loadlistfail=!0,xConfig.loadlist=!0,pupdate())}))}}function clist(e,t,n){const a={p1:0,p2:1,p3:2,p4:3,p5:4,prev:"-",xprev:"-",next:"+",xnext:"+"};null!=n&&($("#x"+xConfig.list).removeClass("active"),xConfig.list=n.substr(1),xConfig.page=0),"pp"==t.substr(0,2)&&(t=t.substr(1)),"+"==a[t]?xConfig.page++:"-"==a[t]?xConfig.page--:xConfig.page=a[t],xConfig.page<0?xConfig.page=xConfig.numPages-1:xConfig.page>xConfig.numPages-1&&(xConfig.page=0),$(e).addClass("active"),$("#p"+(xConfig.page+1)).parent().addClass("active").siblings().removeClass("active"),$("#pp"+(xConfig.page+1)).parent().addClass("active").siblings().removeClass("active"),xConfig.loadlist=!0,pupdate()}function GetImageToNl(e){if(!e)return xConfig.dir+"img/greybox.svg";let t=e.split("&U=");return t[1]&&(e=t[1]),"https://images.weserv.nl/?output=jpg&w=200&h=134&q=80&t=absolute&url="+encodeURIComponent(e)}function xlist(e,t){var n='<div class="container-fluid p-0"><div class="row ml-0 mr-0">';let a="groups";for(var o in"supported"==xConfig.list&&(a="supported"),["supported","popular"].indexOf(xConfig.list)>=0&&(t=t.sort((function(e,t){return t.n-e.n}))),t)if(null==t[o].l)t[o].g=t[o].g.replace(/\s/g,""),n+='<div class="col-sm-6 col-md-4 col-lg-3 col-xl-2 mb-4">  <div class="card h-100">    <a class="overlayLink" href="/'+t[o].g+'"></a>    <div class="card-header text-center font-weight-bold text-truncate p-2">'+t[o].g+'</div>    <div class="card-body p-2">    <img class="card-img-top img-fluid mb-2" loading="lazy" src="'+GetImageToNl(t[o].a)+'" alt="">      <p class="card-text">'+t[o].d+(null!=t[o].t?"<br><b>("+t[o].t+")</b>":"")+'</p>    </div>    <div class="card-footer bg-transparent p-2">     <p class="card-text text-muted float-right">'+t[o].n+'<img class="ml-1" zzstyle="width:24px;" src="'+xConfig.dir+"img/navbar/"+a+'.svg" alt=""></p>    </div>  </div></div>';else if(null!=t[o].l){xConfig.numPages=t[o].l;for(o=1;o<=5;o++)o>xConfig.numPages?$("#p"+o+",#pp"+o).hide():$("#p"+o+",#pp"+o).show()}n+="</div></div>",$(e).html(n),xConfig.list&&loadHash(xConfig.list)}function doHome(e){xpromo(e.n),xConfig.page=0;let t="featured";switch(GET.hash){case"popular":case"promoted":case"supported":case"games":t=GET.hash}t="x"+t,clist($("#"+t),"p1",t),pmain()}mDirect||main();let iframeStorage="iframe_v2",navIframe=document.querySelector("#navIframe");function doIframeModal(){let e=xConfig.gn,t=getIndividualiFrames(),n=document.querySelector("#groupsList"),a=document.querySelector("#groupListSpan"),o=document.querySelector("#iframeSave"),i=document.querySelector("#globalIframe"),s=document.querySelector("#IndividualIframe");t.disabled||(t.disabled=[]),t.list||(t.list=[]),i.checked=t.global,s.checked=guessIfXatFrame(e),t.list&&t.list.length>0?(n.classList.remove("d-none"),a.innerHTML=t.list.join(", ")):n.classList.add("d-none"),o.addEventListener("click",(n=>{if(n.preventDefault(),t.global=i.checked,t.list){let n=t.list.indexOf(e);s.checked?-1==n&&(t.list.push(e),t.disabled&&t.disabled.indexOf(e)>=0&&t.disabled.splice(t.disabled.indexOf(e),1)):(t.list.indexOf(e)>=0&&-1!==n&&t.list.splice(n,1),t.disabled&&-1==t.disabled.indexOf(e)&&t.disabled.push(e))}localStorage.setItem(iframeStorage,JSON.stringify(t)),updateIframe()})),localize(["web","chats"])}function updateIframe(){let e=guessIfXatFrame(),t=document.querySelector("#groupBackgroundFrame");e?xConfig.if&&t&&t.setAttribute("src",xConfig.if):(t&&t.removeAttribute("src"),xConfig.background&&("#"==xConfig.background.charAt(0)?document.body.style.background=xConfig.background:document.body.style.backgroundImage="url('"+xConfig.background+"')"))}function getIndividualiFrames(){let e={global:!0,list:[xConfig.gn],disabled:[]};try{let t=localStorage.getItem(iframeStorage);return null==t?e:(t=JSON.parse(t),t)}catch(t){return e}localize(["web","chats"])}function isMobile(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}navIframe&&navIframe.addEventListener("click",doIframeModal),$(window).width()<450&&$("#promoframe").removeClass("d-none");
"use strict";class GameOver extends Phaser.Scene{constructor(){super({key:"GameOver"});this.info=null;this.winner=null;this.player=null;this.opponent=null;this.BkgEvents=null;this.BootEvents=null}init(a){this.winner=a.winner;this.player=a.player;this.channel=a.channel;this.opponent=a.opponent;this.events.on("quit",this.onUserQuit,this);this.BootEvents=this.scene.get("Boot").events;this.BkgEvents=this.scene.get("Background").events}create(){let a=new Button(this,15,15,"helpButton",()=>{window.open("https://util.rxat.ro/wiki/index.php?title=Four_in_a_row","_blank")}).setOrigin(0);let b=new Button(this,this.cameras.main.width-15,15,"statsButton",()=>{this.SendGame({type:"quit",user:this.player});this.BootEvents.emit("setReady",!1);this.BootEvents.emit("doReset");this.scene.start("Stats")}).setOrigin(1,0);if(this.winner==this.player){this.BkgEvents.emit("change",2)}else{this.BkgEvents.emit("change",3)}if("machine"==this.opponent){let a=new Button(this,80,this.cameras.main.centerY+50,"againButton",()=>{this.BootEvents.emit("setPlaying");this.BootEvents.emit("setReady",!1);this.scene.start("Solo",this.player)}).setOrigin(0);let b=new Button(this,this.cameras.main.width-80,this.cameras.main.centerY+50,"menuButton",()=>{this.SendGame({type:"quit",user:this.player});this.BootEvents.emit("doReset");this.scene.start("Menu",{player:this.player})}).setOrigin(1,0)}else{let a=new Button(this,80,this.cameras.main.centerY+50,"againButton",()=>{if(this.opponent){this.SendGame({type:"start",turn:this.winner,scene:"GameOver"});this.scene.start("Main",{player:this.player,opponent:this.opponent,turn:this.winner})}else{this.SendGame({type:"quit",user:this.player});this.BootEvents.emit("doReset");this.scene.start("Menu",{player:this.player,quit:!0})}}).setOrigin(0);let b=new Button(this,this.cameras.main.width-80,this.cameras.main.centerY+50,"soloButton",()=>{this.BootEvents.emit("setPlaying");this.BootEvents.emit("setReady",!1);this.scene.start("Solo",this.player)}).setOrigin(1,0);let c=new Button(this,this.cameras.main.centerX,this.cameras.main.centerY+133,"menuButton",()=>{this.SendGame({type:"quit",user:this.player});this.BootEvents.emit("doReset");this.scene.start("Menu",{player:this.player})}).setOrigin(.5,0)}this.info=this.add.dynamicBitmapText(this.cameras.main.centerX,this.cameras.main.centerY+200,"roboto","",24).setOrigin(.5)}onUserQuit(a){if(this.opponent==a){this.opponent=null;this.BootEvents.emit("trace",["QUIT",a])}}SendGame(a){a.to=this.opponent;a.from=this.player;this.BootEvents.emit("sendGame",a)}}

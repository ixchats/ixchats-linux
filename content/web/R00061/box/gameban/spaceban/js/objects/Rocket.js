function _assertThisInitialized(a){if(void 0===a){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return a}function _inheritsLoose(a,b){a.prototype=Object.create(b.prototype);a.prototype.constructor=a;a.__proto__=b}var Rocket=function(a){_inheritsLoose(b,a);function b(b,c,d){var e;e=a.call(this,b,c,d)||this;e.scene=b;e.time=400;e.speed=0;var f=e.scene.anims.create({key:"flame",frames:e.scene.anims.generateFrameNumbers("flame"),frameRate:32,repeat:-1});e.ship=e.scene.add.sprite(0,0,"rocket");e.flame=e.scene.add.sprite(-5/2,e.ship.height/2+10,"flame",0).setAlpha(0);e.flame.anims.load("flame");e.flame.anims.play("flame");e.setDepth(1);e.add([e.flame,e.ship]);b.add.existing(_assertThisInitialized(e));b.physics.add.existing(_assertThisInitialized(e));e.body.setSize(e.ship.width-30,e.ship.height-30);e.body.setOffset(-e.ship.width/2+15,-e.ship.height/2+15);e.body.setDrag(.99);e.body.setMaxVelocity(400);e.body.useDamping=!0;e.engineSound=b.sound.add("engine");return e}var c=b.prototype;c.explode=function explode(){var a=this.scene.add.sprite(this.x,this.y,"explode",0);this.scene.anims.create({key:"explode",hideOnComplete:!0,frames:this.scene.anims.generateFrameNames("explode")});this.engineSound.stop();a.play("explode");a.anims.setTimeScale(.7);this.destroy()};c.update=function update(){var a=Math.abs;var b=this;var c=a(this.body.velocity.y);if(25<c&&0==this.flame.alpha){this.scene.tweens.add({targets:this.flame,alpha:1,duration:this.time,ease:"Quart.easeOut"});this.engineSound.play({loop:!0,volume:0});var d=this.scene.tweens.addCounter({from:0,to:.35,duration:800,onUpdate:function onUpdate(){b.engineSound.setVolume(d.getValue())}})}else if(25>=c&&1==this.flame.alpha){this.scene.tweens.add({targets:this.flame,alpha:0,duration:this.time,ease:"Quart.easeIn"});var e=this.scene.tweens.addCounter({from:.35,to:0,duration:800,onUpdate:function onUpdate(){b.engineSound.setVolume(e.getValue())},onComplete:function onComplete(){b.engineSound.stop()}})}if(this.speed!=c){this.speed=c;this.flame.anims.setTimeScale(a(this.speed)/this.time)}};return b}(Phaser.GameObjects.Container);


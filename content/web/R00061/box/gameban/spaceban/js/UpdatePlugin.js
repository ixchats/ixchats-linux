(function(a,b){if("function"==typeof define&&define.amd){define("phaser-plugin-update",["exports","phaser"],b)}else if("undefined"!=typeof exports){b(exports,require("phaser"))}else{var c={exports:{}};b(c.exports,a.Phaser);a.phaserPluginUpdate=c.exports}})(this,function(a,b){'use strict';Object.defineProperty(a,"__esModule",{value:!0});var g=c(b);function c(a){return a&&a.__esModule?a:{default:a}}function d(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}}var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;if("value"in d)d.writable=!0;Object.defineProperty(a,d.key,d)}}return function(b,c,d){if(c)a(b.prototype,c);if(d)a(b,d);return b}}();function e(a,b){if(!a){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return b&&("object"==typeof b||"function"==typeof b)?b:a}function f(a,b){if("function"!=typeof b&&null!==b){throw new TypeError("Super expression must either be null or a function, not "+typeof b)}a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});if(b)Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b}var i=function(a){f(b,a);function b(){d(this,b);return e(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}h(b,[{key:"boot",value:function a(){var b=this.systems.events;this.gameObjects=new g.default.Structs.Set;b.on("update",this.sceneUpdate,this);b.on("shutdown",this.sceneShutdown,this);b.once("destroy",this.sceneDestroy,this)}},{key:"sceneUpdate",value:function a(b,c){this.gameObjects.each(function(a){a.update(b,c)})}},{key:"sceneShutdown",value:function a(){this.gameObjects.clear()}},{key:"sceneDestroy",value:function a(){var b=this.systems.events;b.off("update",this.sceneUpdate,this);b.off("shutdown",this.sceneShutdown,this);b.off("destroy",this.sceneDestroy,this);this.gameObjects=null;this.scene=null;this.systems=null}},{key:"add",value:function a(b){b.once("destroy",this.remove,this);this.gameObjects.set(b)}},{key:"addMultiple",value:function a(b){b.forEach(this.add,this)}},{key:"remove",value:function a(b){b.off("destroy",this.remove,this);this.gameObjects.delete(b)}},{key:"dump",value:function a(){console.log("gameObjects: %s",this.gameObjects.size)}}]);return b}(g.default.Plugins.ScenePlugin);a.default=i;if("undefined"!=typeof window){window.PhaserUpdatePlugin=i}});


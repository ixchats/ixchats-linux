var Snake=function(){function a(a,b,c){this.UP=0;this.DOWN=1;this.LEFT=2;this.RIGHT=3;this.speed=80;this.moveTime=0;this.scene=a;this.free=!1;this.tail=null;this.stick=!1;this.defaultLength=2;this.body=a.add.group();this.width=this.height=32;this.headPos=new Phaser.Geom.Point(b,c);this.tailPos=new Phaser.Geom.Point(b,c);this.heading=this.RIGHT;this.direction=this.RIGHT;var d=this.scene.anims.create({key:"stick",frames:this.scene.anims.generateFrameNumbers("tongue"),frameRate:12});this.tongue=this.scene.add.sprite(b*this.width,c*this.height,"tongue").setOrigin(.5);this.tongue.anims.load("stick");this.head=this.body.create(b*this.width,c*this.height,"snake",9).setOrigin(0);for(var e=0;e<this.defaultLength;e++){this.grow()}}var b=a.prototype;b.update=function update(a,b){if(a>=this.moveTime)return this.move(a)};b.faceLeft=function faceLeft(){if(this.direction===this.UP||this.direction===this.DOWN)this.heading=this.LEFT};b.faceRight=function faceRight(){if(this.direction===this.UP||this.direction===this.DOWN)this.heading=this.RIGHT};b.faceUp=function faceUp(){if(this.direction===this.LEFT||this.direction===this.RIGHT)this.heading=this.UP};b.faceDown=function faceDown(){if(this.direction===this.LEFT||this.direction===this.RIGHT)this.heading=this.DOWN};b.stickTongue=function stickTongue(a){if(this.stick==a)return;this.stick=a;if(this.stick){this.tongue.anims.play("stick")}};b.move=function move(a){switch(this.heading){case this.LEFT:this.head.setTexture("snake",8);this.head.setFlipX(!1);this.head.setFlipY(!1);this.headPos.x=this.headPos.x-1;this.tongue.setAngle(180);this.tongue.x=(this.headPos.x-1)*this.width+16;this.tongue.y=this.headPos.y*this.height+16;if(this.free)this.headPos.x=Phaser.Math.Wrap(this.headPos.x,0,37);break;case this.RIGHT:this.head.setTexture("snake",9);this.head.setFlipX(!1);this.head.setFlipY(!1);this.headPos.x=this.headPos.x+1;this.tongue.setAngle(0);this.tongue.x=(this.headPos.x+1)*this.width+16;this.tongue.y=this.headPos.y*this.height+16;if(this.free)this.headPos.x=Phaser.Math.Wrap(this.headPos.x,0,38);break;case this.UP:this.head.setTexture("snake",10);this.head.setFlipX(!1);this.head.setFlipY(!1);this.headPos.y=this.headPos.y-1;this.tongue.setAngle(270);this.tongue.x=this.headPos.x*this.width+16;this.tongue.y=(this.headPos.y-1)*this.height+16;if(this.free)this.headPos.y=Phaser.Math.Wrap(this.headPos.y,3,25);break;case this.DOWN:this.head.setTexture("snake",11);this.head.setFlipX(!1);this.head.setFlipY(!1);this.headPos.y=this.headPos.y+1;this.tongue.setAngle(90);this.tongue.x=this.headPos.x*this.width+16;this.tongue.y=(this.headPos.y+1)*this.height+16;if(this.free)this.headPos.y=Phaser.Math.Wrap(this.headPos.y,3,25);break;}var b=this.body.getChildren();this.direction=this.heading;Phaser.Actions.ShiftPosition(this.body.getChildren(),this.headPos.x*this.width,this.headPos.y*this.height,1,this.tailPos);this.adjustBody();this.moveTime=a+this.speed;return!0};b.adjustBody=function adjustBody(){var a=this;var b=this.body.getChildren();b.forEach(function(c,d){if(a.free)c.tint=8888789;if(d==b.length-1&&b[d-1]){if(c.x>b[d-1].x){c.setTexture("snake",1);c.setFlipX(!1);c.setFlipY(!1)}else if(c.x<b[d-1].x){c.setTexture("snake",0);c.setFlipX(!1);c.setFlipY(!1)}if(c.y>b[d-1].y){c.setTexture("snake",3);c.setFlipX(!1);c.setFlipY(!1)}else if(c.y<b[d-1].y){c.setTexture("snake",2);c.setFlipX(!1);c.setFlipY(!1)}}else{if(b[d-1]&&b[d+1]){if(b[d-1].y==b[d+1].y&&b[d-1].x!=b[d+1].x){c.setTexture("snake",4);c.setFlipX(!1);c.setFlipY(!1)}else if(b[d-1].y!=b[d+1].y&&b[d-1].x==b[d+1].x){c.setTexture("snake",5);c.setFlipX(!1);c.setFlipY(!1)}else if(b[d-1].y!=b[d+1].y&&b[d-1].x!=b[d+1].x){if(b[d-1].x>c.x&&b[d+1].y>c.y||b[d+1].x>c.x&&b[d-1].y>c.y){c.setTexture("snake",7);c.setFlipX(!0);c.setFlipY(!1)}else if(b[d-1].x<c.x&&b[d+1].y>c.y||b[d+1].x<c.x&&b[d-1].y>c.y){c.setTexture("snake",7);c.setFlipX(!1);c.setFlipY(!1)}else if(b[d-1].x<c.x&&b[d+1].y<c.y||b[d+1].x<c.x&&b[d-1].y<c.y){c.setTexture("snake",6);c.setFlipX(!0);c.setFlipY(!1)}else if(b[d-1].x>c.x&&b[d+1].y<c.y||b[d+1].x>c.x&&b[d-1].y<c.y){c.setTexture("snake",6);c.setFlipX(!1);c.setFlipY(!1)}}}}var e=b[0];var f=b[b.length-1];if(c!=e&&c!=f&&c.x==f.x&&c.y==f.y||c!=e&&0>c.x||c.y<3*a.height||c.x>36*a.width||c.y>24*a.height){c.visible=!1}else{a.tail=f;c.visible=!0}})};b.grow=function grow(){var a=0;if(this.tail)a=this.tail.frame.name;this.body.create(this.tailPos.x,this.tailPos.y,"snake",a).setOrigin(0);this.adjustBody()};b.collideWithApple=function collideWithApple(a){if(this.head.x===a.x&&this.head.y===a.y){a.eat(this.body);for(var b=0;b<a.calories;b++){this.grow()}return!0}else{return!1}};b.collideWithSelf=function collideWithSelf(){var a=this.body.getChildren();for(var b=1;b<a.length;b++){if(this.head.x===a[b].x&&this.head.y===a[b].y){return!0}}return!1};b.collideWithBounds=function collideWithBounds(){var a=this.body.getChildren();if(0>this.head.x||this.head.y<3*this.height||this.head.x>36*this.width||this.head.y>24*this.height){return!0}return!1};return a}();


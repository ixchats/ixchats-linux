!function(){"use strict";function e(e){return e=parseInt(e),isNaN(e)?0:e}let n,t=[],a={};var i={};let r={},o={};document.addEventListener("DOMContentLoaded",(function(){PIXI.utils.skipHello(),n=new PIXI.Application(window.innerWidth,window.innerHeight,{backgroundColor:1087931,antialias:!0,resolution:window.devicePixelRatio,autoResize:!0}),document.body.appendChild(n.view);let e=PIXI.loaders.Resource;e.setExtensionXhrType("php",e.XHR_RESPONSE_TYPE.BLOB),e.setExtensionLoadType("php",e.LOAD_TYPE.IMAGE),s({name:"versionstyle",type:"TextStyle",style:{fontSize:12,fill:"#ffffff"}}),s({name:"version",type:"Text",x:15,y:10,text:"v2.20",style:"versionstyle"}),n.ticker.add((function(e){try{PIXI.tweenManager.update()}catch(e){console.log("tween fail :-(",e,PIXI.tweenManager.tweens),PIXI.tweenManager.tweens.length=0}for(let e in o){let t=g(n.stage,e);if(null!==t){let n=Math.max(o[e].duration-Math.floor((Date.now()-o[e].start)/1e3),0);t.text!=n&&(t.text=n),0===n&&delete o[e]}}}))}));let s=function s(w){if(w instanceof Array){for(let e in w)s(w[e]);return}switch("Sheet"===String(w.type)&&(w.action="preload"),String(w.action)){case"ping":return void T(p,{action:"pong"});case"reset":let e=n.stage.removeChildren();return h(e),Object.values(e).forEach((e=>{e.destroy({children:!0,texture:!0,baseTexture:!0})})),t=[],a={},Howler.unload(),i={},r={},void(o={});case"preload":switch(String(w.type)){case"Sound":if(w.audie=w.audie.replace(/[^a-z0-9]/g,""),!w.audie)return;return w.src=["https://rxat.ro/content/sounds/audies/"+w.audie+".webm","https://rxat.ro/content/sounds/audies/"+w.audie+".mp3"],void(i[String(w.name)]=new Howl({src:w.src,preload:!0}));case"Sheet":return void(new PIXI.loaders.Loader).add(String(E(w.load))).load(c)}}switch(String(w.type)){case"TextStyle":return void(a[String(w.name)]=new PIXI.TextStyle(w.style));case"TweenPath":r[String(w.name)]=new PIXI.tween.TweenPath,r[String(w.name)].closed=!0;for(let e=0;e<w.commands.length;e++)switch(String(w.commands[e][0])){case"arc":r[String(w.name)].arc(w.commands[e][1],w.commands[e][2],w.commands[e][3],w.commands[e][4],w.commands[e][5],w.commands[e][6]);break;case"arcTo":r[String(w.name)].arcTo(w.commands[e][1],w.commands[e][2],w.commands[e][3],w.commands[e][4],w.commands[e][5]);break;case"bezierCurveTo":r[String(w.name)].bezierCurveTo(w.commands[e][1],w.commands[e][2],w.commands[e][3],w.commands[e][4],w.commands[e][5],w.commands[e][6]);break;case"lineTo":r[String(w.name)].lineTo(w.commands[e][1],w.commands[e][2]);break;case"moveTo":r[String(w.name)].moveTo(w.commands[e][1],w.commands[e][2]);break;case"quadraticCurveTo":r[String(w.name)].quadraticCurveTo(w.commands[e][1],w.commands[e][2],w.commands[e][3],w.commands[e][4])}return;case"Sound":return void(void 0!==i[String(w.name)]&&(w.src=void 0,i[String(w.name)].play()));case"Canvas":{let e=425;if(600!=w.size)return void 0;e=600;const t=n.view,a=600;t.style.width=e+"px",t.style.height=a+"px",t.width=e,t.height=a,n.renderer.resize(e,a),x(13,0,e)}return}let f=g(n.stage,String(w.name));if(!0===w.destroy){if(!f)return;return f.parent.removeChild(f),h(f),void f.destroy({children:!0})}if(!0!==w.destroyChildren){if(null===f||!0===f.placeholder){switch(String(w.type)){case"Container":f=new PIXI.Container;break;case"Sprite":if(w.imageUrl&&(w.imageUrl="https://images.weserv.nl/"==(P=w.imageUrl).substr(0,25)?P:"https://images.weserv.nl/?url="+encodeURIComponent(P)),void 0!==w.imageUrl)f=PIXI.Sprite.fromImage(w.imageUrl);else if(null!=w.texture)if(PIXI.utils.TextureCache[w.texture]){if(null!==f)return f.setTexture(PIXI.utils.TextureCache[w.texture]),void(f.placeholder=!1);f=PIXI.Sprite.from(PIXI.utils.TextureCache[w.texture])}else t.push(w),f=new PIXI.Sprite,f.placeholder=!0;f.anchor.set(.5);break;case"Text":f=new PIXI.Text,f.anchor.set(.5);break;case"Graphics":f=new PIXI.Graphics;break;case"StripSprite":if(w.smilie){let e=w.size;!w.height>e&&(e=w.height),e=Math.max(20,Math.min(e,160)),w.load=y("GetStrip6.php?c=s_"+escape(w.smilie)+"_"+e,"s")}if(void 0!==PIXI.utils.TextureCache[w.load]){let e=[],n=Math.floor(PIXI.utils.TextureCache[w.load].width/PIXI.utils.TextureCache[w.load].height);for(let t=0;t<n;t++){var v=new PIXI.Texture(PIXI.utils.TextureCache[w.load],new PIXI.Rectangle(PIXI.utils.TextureCache[w.load].height*t,0,PIXI.utils.TextureCache[w.load].height,PIXI.utils.TextureCache[w.load].height));e.push(v)}f=new PIXI.extras.AnimatedSprite(e),f.anchor.set(.5),f.play()}else{(new PIXI.loaders.Loader).add(String(function(n,t,a){if(n.search("\\.\\.")>=0)return;let i,r=n.split("/");switch(r[2]){case"i.imgur.com":i=r[3].replace(S,""),i="https://i.imgur.com/"+i;break;case"i.postimg.cc":i=r[3]+"/"+r[4],i=i.replace(S,""),i="https://i.postimg.cc/"+i;break;case"rxat.ro":if(r[0]=""==r[1])return n.replace(S,"");break;case"s0.rxat.ro":case"s1.rxat.ro":return n}return i?function(e,n,t){let a="s";if(0==e.length)return"";var i=parse_url(e);if(!(i||(e="/"==e.charAt(0)?"https:"+e:"https://"+e,i=parse_url(e))))return"";if(!i.host)return"";if(i.host.indexOf("rxat.ro")>=0&&i.path.indexOf("GetImage")>0)return e;n==t&&(n=t=calcAvSize(n));return y("GetImage6.php?"+a+"&W="+n+"&H="+t+"&U="+e)}(i,e(t),e(a)):""}(w.load))).load(c),t.push(w)}break;case"AnimatedSprite":{w.load&&(w.load=E(w.load));let e=!0;for(let n=0;n<w.frames.length;n++)if(void 0===PIXI.utils.TextureCache[w.frames[n]]){e=!1;break}if(!e){return(new PIXI.loaders.Loader).add(String(w.load)).load(c),void t.push(w)}{let e=[];for(let n=0;n<w.frames.length;n++)e.push(PIXI.Texture.fromFrame(w.frames[n]));f=new PIXI.extras.AnimatedSprite(e),f.anchor.set(.5),f.play()}}break;case"Barchart":f=function(e,n,t,a,i,r){let o,s=new PIXI.Graphics,c=[22464,16752128,16715792,1025853,8720291,1223318,16711935,8421504,8388608,16448,96,8501511],l=i.length>c.length?c.length:i.length,d=t/l*50/100,u=t/l*60/100,m=t/l*-30/100,g=233*u/1e3,h=g,w=233*(d+u+m)/1e3,p=0;for(o=0;o<l;o++)r[o]>=r[p]&&(p=o);let f=a-p*w-g-h,v=new Array,P=r[p];P<1&&(P=1);for(o=0;o<l;o++)v[o]=i[o]*f/P;for(o=l-1;o>=0;o--){s.lineStyle(0),s.beginFill(I(c[o],40)),s.moveTo((d+u+m)*o,a-g-w*o),s.lineTo((d+u+m)*o,a-v[o]-g-w*o),s.lineTo((d+u+m)*o+d,a-v[o]-w*o),s.lineTo((d+u+m)*o+d,a-w*o),s.lineTo((d+u+m)*o,a-g-w*o),s.endFill();let e=[];e[0]=I(c[o],-70),e[1]=c[o],s.beginFill(e[1]),s.moveTo((d+u+m)*o+d,a-w*o),s.lineTo((d+u+m)*o+d,a-v[o]-w*o),s.lineTo((d+u+m)*o+d+u,a-v[o]-h-w*o),s.lineTo((d+u+m)*o+d+u,a-h-w*o),s.lineTo((d+u+m)*o+d,a-w*o),s.endFill(),s.beginFill(I(c[o],-50)),s.moveTo((d+u+m)*o,a-v[o]-g-w*o),s.lineTo((d+u+m)*o+u,a-v[o]-g-h-w*o),s.lineTo((d+u+m)*o+d+u,a-v[o]-h-w*o),s.lineTo((d+u+m)*o+d,a-v[o]-w*o),s.lineTo((d+u+m)*o,a-v[o]-g-w*o),s.endFill(),s.lineStyle(1,c[o]),s.moveTo((d+u+m)*o,a-g-w*o),s.lineTo((d+u+m)*o,a-v[o]-g-w*o),s.lineTo((d+u+m)*o+u,a-v[o]-g-h-w*o),s.lineTo((d+u+m)*o+d+u,a-v[o]-h-w*o),s.lineTo((d+u+m)*o+d+u,a-h-w*o),s.lineTo((d+u+m)*o+d,a-w*o),s.lineTo((d+u+m)*o,a-g-w*o)}return s}(0,0,void 0!==w.chartWidth?w.chartWidth:400,null!=w.chartHeight?w.chartHeight:200,w.values,w.maxes)}if(!f)return;f.name=w.name;let a=void 0!==w.parent?g(n.stage,String(w.parent)):n.stage;null!==a&&a.addChild(f)}var P;if(void 0!==w.x&&(f.x=Number(w.x)),void 0!==w.y&&(f.y=Number(w.y)),void 0!==w.width&&(f.width=Number(w.width)),void 0!==w.height&&(f.height=Number(w.height)),void 0!==w.alpha&&(f.alpha=Number(w.alpha)),void 0!==w.rotation&&(f.rotation=Number(w.rotation)),void 0!==w.visible&&(f.visible=!0===w.visible),void 0!==w.scale&&(void 0!==w.scale.x&&(f.scale.x=Number(w.scale.x)),void 0!==w.scale.y&&(f.scale.y=Number(w.scale.y))),void 0!==w.buttonMode&&(f.buttonMode=!0===w.buttonMode),void 0!==w.interactive&&(f.interactive=!0===w.interactive),"Graphics"===String(w.type))for(let e=0;e<w.commands.length;e++)switch(String(w.commands[e][0])){case"arc":f.arc(w.commands[e][1],w.commands[e][2],w.commands[e][3],w.commands[e][4],w.commands[e][5],w.commands[e][6]);break;case"arcTo":f.arcTo(w.commands[e][1],w.commands[e][2],w.commands[e][3],w.commands[e][4],w.commands[e][5]);break;case"beginFill":f.beginFill(w.commands[e][1],w.commands[e][2]);break;case"bezierCurveTo":f.bezierCurveTo(w.commands[e][1],w.commands[e][2],w.commands[e][3],w.commands[e][4],w.commands[e][5],w.commands[e][6]);break;case"drawRect":f.drawRect(w.commands[e][1],w.commands[e][2],w.commands[e][3],w.commands[e][4]);break;case"drawRoundedRect":f.drawRoundedRect(w.commands[e][1],w.commands[e][2],w.commands[e][3],w.commands[e][4],w.commands[e][5]);break;case"drawCircle":f.drawCircle(w.commands[e][1],w.commands[e][2],w.commands[e][3]);break;case"endFill":f.endFill();break;case"lineStyle":f.lineStyle(w.commands[e][1],w.commands[e][2],w.commands[e][3],w.commands[e][4]);break;case"lineTo":f.lineTo(w.commands[e][1],w.commands[e][2]);break;case"moveTo":f.moveTo(w.commands[e][1],w.commands[e][2]);break;case"quadraticCurveTo":f.quadraticCurveTo(w.commands[e][1],w.commands[e][2],w.commands[e][3],w.commands[e][4]);break;case"drawEllipse":f.drawEllipse(w.commands[e][1],w.commands[e][2],w.commands[e][3],w.commands[e][4]);break;case"drawPolygon":f.drawPolygon(w.commands[e][1]);break;case"drawStar":f.drawStar(w.commands[e][1],w.commands[e][2],w.commands[e][3],w.commands[e][4],w.commands[e][5],w.commands[e][6]),f.closePath()}if(void 0!==w.tint&&(f.tint=Number(w.tint)),void 0!==w.anchor&&(void 0!==w.anchor.x&&(f.anchor.x=Number(w.anchor.x)),void 0!==w.anchor.y&&(f.anchor.y=Number(w.anchor.y))),void 0!==w.text&&(f.text=String(w.text)),void 0!==w.style&&(f.style=a[String(w.style)]),void 0!==w.countDown&&(o[String(w.name)]={start:Date.now(),duration:Number(w.text)}),void 0!==w.animationSpeed&&(f.animationSpeed=Number(w.animationSpeed)),void 0!==w.tween){let e=PIXI.tweenManager.createTween(f);void 0!==w.tween.easing&&(w.tween.easing=function(e){switch(e){case"inBack":return PIXI.tween.Easing.inBack();case"inBounce":return PIXI.tween.Easing.inBounce();case"inCirc":return PIXI.tween.Easing.inCirc();case"inCubic":return PIXI.tween.Easing.inCubic();case"inElastic":return PIXI.tween.Easing.inElastic();case"inExpo":return PIXI.tween.Easing.inExpo();case"inOutBack":return PIXI.tween.Easing.inOutBack();case"inOutBounce":return PIXI.tween.Easing.inOutBounce();case"inOutCirc":return PIXI.tween.Easing.inOutCirc();case"inOutCubic":return PIXI.tween.Easing.inOutCubic();case"inOutElastic":return PIXI.tween.Easing.inOutElastic();case"inOutExpo":return PIXI.tween.Easing.inOutExpo();case"inOutQuad":return PIXI.tween.Easing.inOutQuad();case"inOutQuart":return PIXI.tween.Easing.inOutQuart();case"inOutQuint":return PIXI.tween.Easing.inOutQuint();case"inOutSine":return PIXI.tween.Easing.inOutSine();case"inQuad":return PIXI.tween.Easing.inQuad();case"inQuart":return PIXI.tween.Easing.inQuart();case"inQuint":return PIXI.tween.Easing.inQuint();case"inSine":return PIXI.tween.Easing.inSine();case"linear":return PIXI.tween.Easing.linear();case"outBack":return PIXI.tween.Easing.outBack();case"outBounce":return PIXI.tween.Easing.outBounce();case"outCirc":return PIXI.tween.Easing.outCirc();case"outCubic":return PIXI.tween.Easing.outCubic();case"outElastic":return PIXI.tween.Easing.outElastic();case"outExpo":return PIXI.tween.Easing.outExpo();case"outQuad":return PIXI.tween.Easing.outQuad();case"outQuart":return PIXI.tween.Easing.outQuart();case"outQuint":return PIXI.tween.Easing.outQuint();case"outSine":return PIXI.tween.Easing.outSine();default:return}}(w.tween.easing)),void 0!==w.tween.path&&(w.tween.path=r[String(w.tween.path)]),e.config(w.tween),e.start()}void 0!==w.draggable&&(f.draggable=!0===w.draggable),void 0===w.interactive&&void 0===w.draggable||(f.removeAllListeners(),f.interactive&&f.draggable?f.on("pointerdown",d).on("pointerup",u).on("pointerupoutside",u).on("pointermove",m):f.interactive&&f.on("pointerdown",l))}else{if(!f)return;let e=f.removeChildren();h(e);for(let n in e)e[n].destroy({children:!0})}};function c(e,n){for(let e in n)for(let a=t.length-1;a>=0;a--)n[e].name===t[a].load&&(s(t[a]),t.splice(a,1));for(let e=t.length-1;e>=0;e--)PIXI.utils.TextureCache[t[e].texture]&&(s(t[e]),t.splice(e,1))}function l(e){let n={name:this.name,action:"click"};T(p,n)}function d(e){this.data=e.data,this.alpha=.5,this.dragging=!0}function u(){if(!0===this.dragging){this.alpha=1,this.dragging=!1,this.data=null;let e={name:this.name,action:"dragEnd",x:this.x,y:this.y};T(p,e),console.log("onDragEnd",e)}else console.log("onDragEnd: not dragging so ignore")}function m(){if(this.dragging){let e=this.data.getLocalPosition(this.parent);this.x=e.x,this.y=e.y}}let g=function e(n,t){for(let a=0;a<n.children.length;a++){if(n.children[a].name===t)return n.children[a];if(n.children[a].children.length>0){let i=e(n.children[a],t);if(null!==i)return i}}return null},h=function e(n){Array.isArray(n)?Object.values(n).forEach((n=>{e(n)})):Object.values(PIXI.tweenManager.getTweensForTarget(n)).forEach((t=>{if(n.children.length>0&&e(n.children),console.log("removeTween",t),PIXI.tweenManager.removeTween(t),PIXI.tweenManager._tweensToDelete.length){for(let e=0;e<PIXI.tweenManager._tweensToDelete.length;++e)PIXI.tweenManager._remove(PIXI.tweenManager._tweensToDelete[e]);PIXI.tweenManager._tweensToDelete.length=0}}))};function I(e,n){let t,a,i;return t=e>>16,a=e>>8&255,i=255&e,n>=0?(t=t*(100-n)/100,a=a*(100-n)/100,i=i*(100-n)/100):(t-=256*n/100,a-=256*n/100,i-=256*n/100,t>255&&(t=255),a>255&&(a=255),i>255&&(i=255)),Math.floor((t<<16)+(a<<8)+i)}let w=parseInt(window.location.search.substr(1)),p=w,f=0,v=!1,P=60002,b="https://rxat.ro";function T(e,n){let t=JSON.stringify(n),a=LZString.compressToBase64(t);x(P,e,a)}function x(e,n,t){if(NaN!==w&&1===e&&0===n&&""===t)return void X(1,0,"");let a={channel:e,user:n,msg:t,tobox:1};parent.postMessage(JSON.stringify(a),b)}function X(n,t,a){1==n?(console.log("connected!"),v=!0,x(P,0,""),T(NaN!==w?w:0,{action:"gong"})):n==P&&a.length>0&&function(n,t){let a=LZString.decompressFromBase64(t),i=JSON.parse(a),r=e(n);!p&&r>0&&(p=r),s(i)}(t,a)}window.addEventListener("message",(function(e){if(e.origin!==b)return void console.log("onMessage Bad Origin=",e.origin,e);let n=JSON.parse(e.data);X(n.channel,n.user,n.msg)}),!1),window.setInterval((function(e){!v&&f%12==0&&f<450&&x(1,0,""),f++}),83);let S=new RegExp("[^0-9a-zA-Z_\\-\\.:/]","g");function E(e){return y("PixiJson.json?z2&U="+e)}function y(e,n){n||(n="i");for(var t=e.substr(-10),a=0,i=0;i<10;i++)a+=t.charCodeAt(i);return"https://"+n+(1&a)+".rxat.ro/web_gear/chat/"+e}}();
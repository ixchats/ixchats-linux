"use strict";function _inheritsLoose(a,b){a.prototype=Object.create(b.prototype);a.prototype.constructor=a;a.__proto__=b}var GameOver=function(a){_inheritsLoose(b,a);function b(){var b;b=a.call(this,{key:"GameOver"})||this;b.info=null;b.winner=null;b.player=null;b.opponent=null;b.BkgEvents=null;b.BootEvents=null;return b}var c=b.prototype;c.init=function init(a){this.winner=a.winner;this.player=a.player;this.channel=a.channel;this.opponent=a.opponent;this.events.on("quit",this.onUserQuit,this);this.BootEvents=this.scene.get("Boot").events;this.BkgEvents=this.scene.get("Background").events};c.create=function create(){var a=this;var b=new Button(this,15,15,"helpButton",function(){window.open("https://util.rxat.ro/wiki/index.php?title=Four_in_a_row","_blank")}).setOrigin(0);var c=new Button(this,this.cameras.main.width-15,15,"statsButton",function(){a.SendGame({type:"quit",user:a.player});a.BootEvents.emit("setReady",!1);a.BootEvents.emit("doReset");a.scene.start("Stats")}).setOrigin(1,0);if(this.winner==this.player){this.BkgEvents.emit("change",2)}else{this.BkgEvents.emit("change",3)}if("machine"==this.opponent){var d=new Button(this,80,this.cameras.main.centerY+50,"againButton",function(){a.BootEvents.emit("setPlaying");a.BootEvents.emit("setReady",!1);a.scene.start("Solo",a.player)}).setOrigin(0);var e=new Button(this,this.cameras.main.width-80,this.cameras.main.centerY+50,"menuButton",function(){a.SendGame({type:"quit",user:a.player});a.BootEvents.emit("doReset");a.scene.start("Menu",{player:a.player})}).setOrigin(1,0)}else{var f=new Button(this,80,this.cameras.main.centerY+50,"againButton",function(){if(a.opponent){a.SendGame({type:"start",turn:a.winner,scene:"GameOver"});a.scene.start("Main",{player:a.player,opponent:a.opponent,turn:a.winner})}else{a.SendGame({type:"quit",user:a.player});a.BootEvents.emit("doReset");a.scene.start("Menu",{player:a.player,quit:!0})}}).setOrigin(0);var g=new Button(this,this.cameras.main.width-80,this.cameras.main.centerY+50,"soloButton",function(){a.BootEvents.emit("setPlaying");a.BootEvents.emit("setReady",!1);a.scene.start("Solo",a.player)}).setOrigin(1,0);var h=new Button(this,this.cameras.main.centerX,this.cameras.main.centerY+133,"menuButton",function(){a.SendGame({type:"quit",user:a.player});a.BootEvents.emit("doReset");a.scene.start("Menu",{player:a.player})}).setOrigin(.5,0)}this.info=this.add.dynamicBitmapText(this.cameras.main.centerX,this.cameras.main.centerY+200,"roboto","",24).setOrigin(.5)};c.onUserQuit=function onUserQuit(a){if(this.opponent==a){this.opponent=null;this.BootEvents.emit("trace",["QUIT",a])}};c.SendGame=function SendGame(a){a.to=this.opponent;a.from=this.player;this.BootEvents.emit("sendGame",a)};return b}(Phaser.Scene);

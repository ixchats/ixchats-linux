/* 
Code is under CC-BY 4.0 
Author: Daniel. S. 2016 @ shadownineteen@gmail.com 
Author of loading icon: http://www.flaticon.com/authors/google 
 
Usage: 
<element pokemon="mudkip"></element> 
<element avatar="animated_strip_url"></element> 
<element smiley="sucool#800080"></element> 
*/ 
var xsl_r = 50,
    xsl_cache = [],
    xsl_scale = 20;
Array.prototype.xsl_dI = function () {
    for (var c = [], f = [], d = 0; arguments.length > d; d++) f.push(arguments[d]);
    for (d = 0; this.length > d; d++) - 1 == f.indexOf(d) && c.push(this[d]);
    return c
};

function xsl_iV(c) {
    "undefined" !== typeof jQuery && c instanceof jQuery && (c = c[0]);
    c = c.getBoundingClientRect();
    var f = c.left <= (window.innerWidth || document.documentElement.clientWidth) && 0 <= c.left + c.width;
    return c.top <= (window.innerHeight || document.documentElement.clientHeight) && 0 <= c.top + c.height && f
}
window.addEventListener("load", function (c) {
    function f(b) {
        return "HTMLElement" in window ? b && b instanceof HTMLElement : !(!b || "object" !== typeof b || 1 !== b.nodeType || !b.nodeName)
    }

    function d(b, c, e, a, f) {
        c.setAttribute("xslst", "p");
        a = isNaN(a) ? 20 : a;
        a = 20 == a ? a : 100 < a ? 100 : 20 > a ? 20 : a;
        e || b.match(/^https:\/\/s(.*?).xat.com/) || (b = "https://gs.rxat.ro/s_(" + b.replace(/#/g, "%23").replace(/(\(|\))/g, "") + "*)_" + a);
        b += e || -1 != b.indexOf("&") ? "" : "&" + Math.random();
        b = -1 != b.indexOf("s1.xat.com") ? b.replace(/s1/g,
            "s0") : b.replace(/s0/g, "s1");
        var g = new Image;
        g.addEventListener("load", function () {
            var a = this.src;
            xsl_r = 25;
            var b = Math.round(this.width / this.height),
                d = f ? .03 * b : 1 / 72 * 6 * b;
            c.style.background = 'url("' + a + '")no-repeat';
            c.style.height = this.height;
            c.style.width = this.height;
            this.width >= 2 * this.height && (document.styleSheets[0].insertRule("@" + h.css + "keyframes a_" + this.width + "{100%{background-position:-" + this.width + "px}}", 0), c.style.animation = "a_" + this.width + " " + d + "s steps(" + b + ") infinite");
            c.setAttribute("xslst",
                "l")
        }, !1);
        g.addEventListener("error", function () {
            var b = this.src;
            c.setAttribute("xslst", "p");
            xsl_r--;
            0 < xsl_r && setTimeout(d.bind(null, -1 != b.indexOf("&") ? b.substr(0, b.indexOf("&")) : b, c, e, a, f), 1E3);
            if (0 >= xsl_r) return xsl_r = 25
        }, !1);
        g.src = b
    }
    document.styleSheets[0].insertRule("@keyframes xsl_spin{0%{transform:rotate(0deg)}100%{transform:rotate(-360deg)}}", 0);
    document.styleSheets[0].insertRule("[xslst='p']:after{content:'';display:inline-block;position:relative;width:100px;height:100px;background:url(img/loader2.svg);animation:xsl_spin 1.75s steps(300) infinite}",
        0);
    var h = function () {
        var b = window.getComputedStyle(document.documentElement, ""),
            b = (Array.prototype.slice.call(b).join("").match(/-(moz|webkit|ms)-/) || "" === b.OLink && ["", "o"])[1];
        return {
            dom: "WebKit|Moz|MS|O".match(new RegExp("(" + b + ")", "i"))[1],
            lowercase: b,
            css: "-" + b + "-",
            js: b[0].toUpperCase() + b.substr(1)
        }
    }();
    setInterval(function () {
        var b = document.querySelectorAll("[smiley]:not([xslst]),[avatar]:not([xslst]),[pokemon]:not([xslst])"),
            c = document.querySelectorAll("[xslst=l]");
        if (c)
            for (var e in c) {
                var a = c[e];
                f(a) && (xsl_iV(a) || "1" == a.getAttribute("xslca") || (-1 == xsl_cache.indexOf(a) ? xsl_cache.push(a, a.style.background ? a.style.background : "0") : xsl_cache[xsl_cache.indexOf(a) + 1] = a.style.background ? a.style.background : "0", a.style.background = "0", a.setAttribute("xslca", "1")), xsl_iV(a) && "1" == a.getAttribute("xslca") && (a.style.background = xsl_cache[xsl_cache.indexOf(a) + 1], xsl_cache = xsl_cache.xsl_dI(xsl_cache.indexOf(a), xsl_cache.indexOf(a) + 1), a.removeAttribute("xslca")))
            }
        if (b)
            for (var h in b) e = b[h], f(e) && ((a = e.getAttribute("smiley")) &&
                a.match(/^[a-zA-Z0-9#\-\_]+$/) && (-1 < a.indexOf("_") && (xsl_scale = a.substr(a.lastIndexOf("_") + 1), a = a.substr(0, a.indexOf("_"))), d(a, e, !1, xsl_scale, !1)), (a = e.getAttribute("avatar")) && d(a, e, !0, xsl_scale, !1), (a = e.getAttribute("pokemon")) && a.match(/^[a-zA-Z0-9\-\_:\/\.\?\=]+$/) && d("https://shadow19.xyz/pokemon/?n=" + a, e, !0, xsl_scale, !0));
        delete b;
        delete c;
    }, 500)
}, !1);